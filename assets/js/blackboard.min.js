$(document).on('click', '.question-header', function () {
    // abrir el question-body del question-header
    $(this).next().slideToggle();
})

$(document).on('click', '#download', function () {
    var json = JSON.parse($('#json').val());
    var array = [];
    json.courses.forEach(course => {
        if (course.id == "_180499_1") {
            course.tests.forEach(test => {
                if (test.id == "_16135444_1") {
                    test.attemps.forEach(attemp => {
                        var data = attemp.questions;
                        var name = `${attemp.score}-20-${attemp.id}`;
                        array.push({ 'id': name });
                        // descargar el archivo json
                        var file = new File([JSON.stringify(data, null, 2)], name, { type: "application/json" });
                        var url = URL.createObjectURL(file);
                        var a = document.createElement("a");
                        a.href = url;
                        a.download = name;
                        a.click();
                        URL.revokeObjectURL(url);
                    });
                }
            })
        }
    });
    $('#array').val(JSON.stringify(array));
})